# Generating the client

To generate the client you will need to
install [openapi-generator](https://github.com/OpenAPITools/openapi-generator):
which requires [Java](https://www.java.com/en/download/) to be installed on your system. You can then install the cli
with:

```commandline
npm install @openapitools/openapi-generator-cli -g
```

Provided you have generated the AVIS OpenAPI `schema.yml` file as described in the [AVIS README](../../avis/README.md) (
and openapi-generator-cli is available on your system), you can automatically generate a python http client for the AVIS
API with the following commands (from this directory):

```commandline
openapi-generator-cli version-manager set 7.2.0
openapi-generator-cli generate --global-property apiTests=false,modelTests=false -i ../../avis/schema.yml -g python -o generated --additional-properties=packageName=vue_avis_client,generateSourceCodeOnly=true
```

The generated sources will be in `generated/vue_avis_client`.

Extensive documentation for each endpoints will be automatically generated by the openapi-generator-cli with a top-level
README located at `generated/vue_avis_client_README.md`. See this file for more information on how to use
the generated
client.

If you need to use the client in another python package you can reference this directory as a dependency in
your `pyproject.toml`:

```toml
[tool.poetry.dependencies]
vue-avis-client = { path = "relative/path/to/this/directory", develop = true }
```

Where `path` is the relative path to this package from your package's root directory (where
the `pyproject.toml` file is located).

The `develop = true` flag will make sure that the package is installed in editable mode, so that everytime you
regenerate the client, the changes will be reflected in your package's virtual environment.

In the future we will release the client as a separate package on PyPI.

See the `avis/agent` package for an example of how to use the generated client in a python package.

## Prepare for release/Before making a PR

Bump the version of the library:

```bash

cd ../..
make bump-version project=libs/vue-avis-client
```

Commit, push your changes and make a PR.
